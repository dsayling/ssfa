version: 2.1

wokflows:
  version: 2

  build:
    jobs:
      - build
      - style
      - test

jobs:
  build:
    executor: node/default
    steps:
      - checkout
      - node/install-yarn
      - run: yarn install
      - run: yarn build:lexer
      - run: yarn build:core

  style:
    executor: node/default
    steps:
      - checkout
      - run: npm install
      - run: npm run eslint

  test:
    executor: node/default
    steps:
      - checkout
      - run: npm install
      - run: npm run test

orbs:
  node: circleci/node@4.0.0

